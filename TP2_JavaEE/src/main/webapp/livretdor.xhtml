
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:p="http://primefaces.org/ui"
  xmlns:c="http://java.sun.com/jsp/jstl/core">
  
<h:head>
  <title>Livret d'or</title>
  <link rel="stylesheet" type="text/css" href="css/style.css" />
</h:head>
<h:body>



<div class="card">
    <p:tabMenu activeIndex="#{param.i}">
    
        <p:menuitem value="Acceuil"  outcome="acceuil.xhtml"  icon="pi pi-fw pi-home">
         <f:param name="i" value="0"/>
        </p:menuitem>
        
        <p:menuitem value="Inscription"  outcome="inscription.xhtml"  icon="pi pi-fw pi-user">
         <f:param name="i" value="1"/>
        </p:menuitem>
        
         <p:menuitem value="Livret d'or"  outcome="livretdor.xhtml"  icon="pi pi-fw pi-book">
         <f:param name="i" value="2"/>
        </p:menuitem>
 
    </p:tabMenu>
</div>

<div class="card">
    
   <div  class="parent">
	  <h:form id="commentaireForm">
	    <p:panel header="Laisser un commentaire" >
		    <h:panelGrid columns="2">
		     
		     <h:outputLabel value="Nom :"/>
	        <p:inputText  id="nomMembre" value="#{commentaireBean.commentaire.nomMembre}"  required="true"/>
	
	        <h:outputLabel value="Contenu du commentaire :"/>
	        <p:inputTextarea rows="6"  id="contenu" value="#{commentaireBean.commentaire.contenu}"  required="true"/>
			
			<p:commandButton  action="#{commentaireBean.creerCommentaire()}" value="Envoyer le commentaire" update="commentaireForm" />	
		       
		    </h:panelGrid>
	    </p:panel>
	  </h:form>
	</div>  
    
    <p:panel header="Top commentaires" >      
		    <div class="card">
		        <p:dataTable var="com" value="#{commentaireBean.getCommentairesDesc()}">
		
		            <p:column headerText="Nom">
		                <h:outputText  value="#{com.nomMembre}"  />
		                
		            </p:column>
		
		            <p:column headerText="Commentaire">
		                <h:outputText value="#{com.contenu}" />
		            </p:column>
		            
		            
		            <p:column headerText="Likes">
		            	<h:outputText value="#{com.nbLikes}" />  
		            	<i class="pi pi-thumbs-up" style="font-size: 2rem"></i>           
		            </p:column>
		            
		            <p:column headerText="Aimer le commentaire">
		            	<p:commandButton  action="#{commentaireBean.upvote()}" value="J'aime"  >
		                </p:commandButton>
		                
		            </p:column>
		            
		            
		            
		        </p:dataTable>
		    </div>
		</p:panel>
    
</div>


</h:body>
 </html>